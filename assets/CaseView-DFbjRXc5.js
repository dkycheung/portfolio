import{d as U,r as i,g as T,$ as h,c as a,o as r,a as o,m as y,u as g,q as F,t as $,n as N,F as B}from"./vendor-CUb9rlyQ.js";import{f as d}from"./CaseListView-CzsRzG7v.js";import{g as k}from"./AboutView-Bh9v6sMd.js";const D={class:"links col align-content-end"},E=["href"],S={key:1},j=["href"],z=["href"],R={key:2},V=["innerHTML"],q={class:"info col align-content-end"},I=["innerHTML"],O=["innerHTML"],P=["innerHTML"],W=["src"],A={id:"imgModalCaption"},Q=U({__name:"CaseView",props:{config:{}},setup(_){const u=_,f=i(""),c=i(""),p=i(null),M=i(k(u.config.backgroundUrl)??"/"),m=i(null),s=i({show:!1,img:"",caption:""});T(async()=>{try{const e=await fetch(k(u.config.contentUrl));f.value=await e.text();const l=new DOMParser().parseFromString(f.value,"text/html");w(l),c.value=l.body.innerHTML}catch(e){console.error("Failed to load HTML:",e),c.value="<p>Error loading content</p>"}const n=p.value.getElementsByClassName("figure");console.debug({figures:n});for(let e=0;e<n.length;e++){const t=n[e];t.addEventListener("click",b),console.debug(t)}console.debug("modal:",m.value)});function w(n){h(n.body).find("img.figure").map((t,l)=>{const L=l.className;l.className="";const v=h(l),H=v.attr("alt");v.wrap(`<div class="${L}"><figure></figure></div>`).after(`<figcaption>${H}</figcaption>`)})}function b(n){const e=n.target.closest("div.figure");if(e){const t=e.querySelector("img");s.value={caption:t.alt,img:t.src,show:!0},console.debug(e,t,s.value),n.preventDefault()}}function C(n){s.value={caption:"",img:"",show:!1},n.preventDefault()}return(n,e)=>(r(),a(B,null,[o("div",{class:"html-header row align-content-between",style:F({backgroundImage:`url(${M.value})`})},[o("div",D,[n.config.siteUrl!=null?(r(),a("a",{key:0,href:n.config.siteUrl,target:"_blank",class:"website-btn icon-link btn btn-secondary justify-content-center"},e[0]||(e[0]=[o("span",null,"Website",-1),o("i",{class:"bi bi-box-arrow-up-right"},null,-1)]),8,E)):n.config.appUrl?.apple!=null||n.config.appUrl?.google!=null?(r(),a("span",S,[n.config.appUrl?.apple!=null?(r(),a("a",{key:0,href:n.config.appUrl?.apple,target:"_blank",class:"app-btn icon-link btn btn-secondary justify-content-center"},e[1]||(e[1]=[o("i",{class:"bi bi-apple"},null,-1)]),8,j)):y("",!0),n.config.appUrl?.google!=null?(r(),a("a",{key:1,href:n.config.appUrl?.google,target:"_blank",class:"app-btn icon-link btn btn-secondary justify-content-center"},e[2]||(e[2]=[o("i",{class:"bi bi-google-play"},null,-1)]),8,z)):y("",!0)])):(r(),a("span",R,"Â "))]),o("h1",{class:"text-center",innerHTML:g(d)(n.config.title)},null,8,V),o("div",q,[o("span",{innerHTML:g(d)(n.config.role)},null,8,I),e[3]||(e[3]=o("br",null,null,-1)),o("span",{innerHTML:g(d)(n.config.year)},null,8,O)])],4),o("div",{innerHTML:c.value,ref_key:"htmlRef",ref:p,class:"inner-html clearfix",onClick:b},null,8,P),o("div",{id:"imgModal",class:N(["modal",{"d-none":!s.value.show}]),ref_key:"modal",ref:m},[o("span",{class:"close",onClick:C},e[4]||(e[4]=[o("i",{class:"bi bi-x-circle"},null,-1)])),o("img",{class:"modal-content",src:s.value.img,id:"imgModalContent"},null,8,W),o("div",A,$(s.value.caption),1)],2)],64))}});export{Q as default};
