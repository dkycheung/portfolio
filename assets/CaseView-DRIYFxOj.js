import{d as T,r as l,g as U,$ as h,c as a,o as r,a as o,m as y,u as c,q as F,t as $,n as N,F as j}from"./vendor-CUb9rlyQ.js";import{f as d}from"./CaseListView-CBY1HRMD.js";import{g as k}from"./AboutView-Ub3KOxVg.js";const B={class:"links col align-content-end"},D=["href"],E={key:1},S=["href"],z=["href"],R={key:2},V=["innerHTML"],q=["innerHTML"],I={class:"info col align-content-end"},O=["innerHTML"],P=["innerHTML"],W=["innerHTML"],A=["src"],G={id:"imgModalCaption"},X=T({__name:"CaseView",props:{config:{}},setup(M){const u=M,p=l(""),g=l(""),f=l(null),_=l(k(u.config.backgroundUrl)??"/"),m=l(null),s=l({show:!1,img:"",caption:""});U(async()=>{try{const n=await fetch(k(u.config.contentUrl));p.value=await n.text();const i=new DOMParser().parseFromString(p.value,"text/html");w(i),g.value=i.body.innerHTML}catch(n){console.error("Failed to load HTML:",n),g.value="<p>Error loading content</p>"}const e=f.value.getElementsByClassName("figure");console.debug({figures:e});for(let n=0;n<e.length;n++){const t=e[n];t.addEventListener("click",b),console.debug(t)}console.debug("modal:",m.value)});function w(e){h(e.body).find("img.figure").map((t,i)=>{const H=i.className;i.className="";const v=h(i),C=v.attr("alt");v.wrap(`<div class="${H}"><figure></figure></div>`).after(`<figcaption>${C}</figcaption>`)})}function b(e){const n=e.target.closest("div.figure");if(n){const t=n.querySelector("img");s.value={caption:t.alt,img:t.src,show:!0},console.debug(n,t,s.value),e.preventDefault()}}function L(e){s.value={caption:"",img:"",show:!1},e.preventDefault()}return(e,n)=>(r(),a(j,null,[o("div",{class:"html-header row align-content-between",style:F({backgroundImage:`url(${_.value})`})},[o("div",B,[e.config.siteUrl!=null?(r(),a("a",{key:0,href:e.config.siteUrl,target:"_blank",class:"website-btn icon-link btn btn-secondary justify-content-center"},n[0]||(n[0]=[o("span",null,"Website",-1),o("i",{class:"bi bi-box-arrow-up-right"},null,-1)]),8,D)):e.config.appUrl?.apple!=null||e.config.appUrl?.google!=null?(r(),a("span",E,[e.config.appUrl?.apple!=null?(r(),a("a",{key:0,href:e.config.appUrl?.apple,target:"_blank",class:"app-btn icon-link btn btn-secondary justify-content-center"},n[1]||(n[1]=[o("i",{class:"bi bi-apple"},null,-1)]),8,S)):y("",!0),e.config.appUrl?.google!=null?(r(),a("a",{key:1,href:e.config.appUrl?.google,target:"_blank",class:"app-btn icon-link btn btn-secondary justify-content-center"},n[2]||(n[2]=[o("i",{class:"bi bi-google-play"},null,-1)]),8,z)):y("",!0)])):(r(),a("span",R,"Â "))]),o("div",{class:"project text-center",innerHTML:c(d)(e.config.title)},null,8,V),o("div",{class:"company text-center",innerHTML:c(d)(e.config.company)},null,8,q),o("div",I,[o("span",{innerHTML:c(d)(e.config.role)},null,8,O),n[3]||(n[3]=o("br",null,null,-1)),o("span",{innerHTML:c(d)(e.config.year)},null,8,P)])],4),o("div",{innerHTML:g.value,ref_key:"htmlRef",ref:f,class:"inner-html clearfix",onClick:b},null,8,W),o("div",{id:"imgModal",class:N(["modal",{"d-none":!s.value.show}]),ref_key:"modal",ref:m},[o("span",{class:"close",onClick:L},n[4]||(n[4]=[o("i",{class:"bi bi-x-circle"},null,-1)])),o("img",{class:"modal-content",src:s.value.img,id:"imgModalContent"},null,8,A),o("div",G,$(s.value.caption),1)],2)],64))}});export{X as default};
